<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.706afbc0097f189dec3d.css">@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/static/roboto-latin-100-7370c3679472e9560965ff48a4399d0b.woff2) format("woff2"),url(/static/roboto-latin-100-5cb7edfceb233100075dc9a1e12e8da3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/static/roboto-latin-100italic-f8b1df51ba843179fa1cc9b53d58127a.woff2) format("woff2"),url(/static/roboto-latin-100italic-f9e8e590b4e0f1ff83469bb2a55b8488.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/static/roboto-latin-300-ef7c6637c68f269a882e73bcb57a7f6a.woff2) format("woff2"),url(/static/roboto-latin-300-b00849e00f4c2331cddd8ffb44a6720b.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/static/roboto-latin-300italic-14286f3ba79c6627433572dfa925202e.woff2) format("woff2"),url(/static/roboto-latin-300italic-4df32891a5f2f98a363314f595482e08.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/static/roboto-latin-400-479970ffb74f2117317f9d24d9e317fe.woff2) format("woff2"),url(/static/roboto-latin-400-60fa3c0614b8fb2f394fa29944c21540.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/static/roboto-latin-400italic-51521a2a8da71e50d871ac6fd2187e87.woff2) format("woff2"),url(/static/roboto-latin-400italic-fe65b8335ee19dd944289f9ed3178c78.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/static/roboto-latin-500-020c97dc8e0463259c2f9df929bb0c69.woff2) format("woff2"),url(/static/roboto-latin-500-87284894879f5b1c229cb49c8ff6decc.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/static/roboto-latin-500italic-db4a2a231f52e497c0191e8966b0ee58.woff2) format("woff2"),url(/static/roboto-latin-500italic-288ad9c6e8b43cf02443a1f499bdf67e.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/static/roboto-latin-700-2735a3a69b509faf3577afd25bdf552e.woff2) format("woff2"),url(/static/roboto-latin-700-adcde98f1d584de52060ad7b16373da3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/static/roboto-latin-700italic-da0e717829e033a69dec97f1e155ae42.woff2) format("woff2"),url(/static/roboto-latin-700italic-81f57861ed4ac74741f5671e1dff2fd9.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/static/roboto-latin-900-9b3766ef4a402ad3fdeef7501a456512.woff2) format("woff2"),url(/static/roboto-latin-900-bb1e4dc6333675d11ada2e857e7f95d7.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/static/roboto-latin-900italic-ebf6d1640ccddb99fb49f73c052c55a8.woff2) format("woff2"),url(/static/roboto-latin-900italic-28f9151055c950874d2c6803a39b425b.woff) format("woff")}.header-module--container--1QvYu{grid-column:1/4;display:flex;flex-direction:column;align-items:center;justify-content:center}.header-module--container--1QvYu .header-module--icon--1MTLq{color:#5f6368;padding:1rem}.header-module--container--1QvYu .header-module--icon--1MTLq:active,.header-module--container--1QvYu .header-module--icon--1MTLq:hover{color:#0e7475}.header-module--container--1QvYu h1{font-size:8rem}.header-module--container--1QvYu h1 a{color:#5f6368;font-weight:100;border:none}@media (max-width:37.5em){.header-module--container--1QvYu h1{font-size:5.8rem}}.footer-module--container--Mv3GA{grid-column:1/4;display:flex;flex-direction:column;align-items:center;justify-content:center}.footer-module--container--Mv3GA .footer-module--author--xwwnz{color:#0e7475}*,:after,:before{margin:0;padding:0;box-sizing:inherit}html{font-size:62.5%}body{box-sizing:border-box;height:100vh;font-family:Roboto,sans-serif;font-size:1.6rem;font-weight:400;line-height:1.8;color:#5f6368;background-color:#f8f9fa}::selection{background:#eaecef}p{margin-bottom:1.6rem}h1{font-weight:400}a{text-decoration:none;outline:none;color:#0e7475}a:active,a:hover{border-bottom:1px solid #0e7475}.main-layout-module--container--1qU_Z{display:grid;grid-template-rows:24rem 1fr 10rem;grid-template-columns:minmax(1.2rem,1fr) minmax(auto,78ch) minmax(1.2rem,1fr);justify-items:stretch;align-items:stretch;height:100vh}.main-layout-module--container--1qU_Z main{grid-row:2/3;grid-column:2/3;align-self:flex-start;height:100%}.recent-posts-module--container--1ktEb{margin-top:2rem}.recent-posts-module--container--1ktEb h2{color:#0e7475;font-size:1.8rem}.recent-posts-module--container--1ktEb ul{margin-top:1rem;margin-bottom:1rem;list-style:none}.recent-posts-module--container--1ktEb ul li{margin-bottom:2rem}.recent-posts-module--container--1ktEb ul li a{color:#5f6368}.recent-posts-module--container--1ktEb ul li a:hover h3{color:#0e7475;border:none}.recent-posts-module--container--1ktEb ul li span{font-size:1.4rem}.recent-projects-module--container--2YOzO{margin-top:2rem}.recent-projects-module--container--2YOzO h2{color:#0e7475;font-size:1.8rem}.recent-projects-module--container--2YOzO ul{margin-top:2rem;margin-bottom:2rem;list-style:none;display:flex;justify-content:center;flex-wrap:wrap}.recent-projects-module--container--2YOzO ul li{margin:1rem;max-width:200px}.recent-projects-module--container--2YOzO ul li a{color:#5f6368}.recent-projects-module--container--2YOzO ul li a:hover h4{color:#0e7475;border:none}.recent-projects-module--container--2YOzO ul li span{font-size:1.4rem}@media (max-width:37.5em){.recent-projects-module--container--2YOzO ul li{max-width:300px}}.index-module--highlight--3zbN2{color:#0e7475}.mdx-components-module--h2--Pu9Up{margin-bottom:1rem;border-bottom:1px solid #eaecef}.mdx-components-module--blockquote--75glA{margin-top:1rem;margin-bottom:1rem;margin-left:1rem;font-style:italic}.mdx-components-module--blockquote--75glA p{padding-left:1.6rem;border-left:3px solid #eaecef}.mdx-components-module--blockquote--75glA p:before{content:"\201C"}.mdx-components-module--blockquote--75glA p:after{content:"\201D"}.mdx-components-module--code--Ikf1a{background-color:#eaecef}.mdx-components-module--pre--3YkNB{background-color:#eaecef;padding:1rem}.mdx-components-module--li--1xpK9{margin-left:4ch}.mdx-components-module--ol--GAQc0,.mdx-components-module--ul--2-uZm{margin-bottom:1.6rem}.mdx-layout-module--container--3TDF0 .mdx-layout-module--nav--nwvf_{margin-bottom:2rem}.mdx-layout-module--container--3TDF0 .mdx-layout-module--date--3ApRI{font-size:1.4rem;margin-bottom:1.8rem}.posts-module--container--eoiWG{display:flex;flex-direction:column;justify-content:space-between;height:100%}.posts-module--container--eoiWG .posts-module--content--LX1ks .posts-module--nav--1tXeV{margin-bottom:2rem}.posts-module--container--eoiWG .posts-module--content--LX1ks ul{margin-top:1rem;margin-bottom:1rem;list-style:none}.posts-module--container--eoiWG .posts-module--content--LX1ks ul li{margin-bottom:2rem}.posts-module--container--eoiWG .posts-module--content--LX1ks ul li a{color:#5f6368}.posts-module--container--eoiWG .posts-module--content--LX1ks ul li a:hover h3{color:#0e7475;border:none}.posts-module--container--eoiWG .posts-module--content--LX1ks ul li span{font-size:1.4rem}.posts-module--container--eoiWG .posts-module--pagination--3X3_w{display:flex;justify-content:space-between;text-align:center;padding:4rem 20rem 0}@media (max-width:37.5em){.posts-module--container--eoiWG .posts-module--pagination--3X3_w{padding:4rem 6rem 0}}.posts-module--container--eoiWG .posts-module--pagination--3X3_w .posts-module--numbers--3xm6A{display:flex;width:100%;justify-content:space-evenly;color:#0e7475}.posts-module--container--eoiWG .posts-module--pagination--3X3_w .posts-module--numbers--3xm6A .posts-module--active--Fx1bH{color:#5f6368;pointer-events:none;cursor:default}.posts-module--container--eoiWG .posts-module--pagination--3X3_w .posts-module--numbers--3xm6A a{color:inherit}.posts-module--container--eoiWG .posts-module--pagination--3X3_w .posts-module--text--3KSF0{width:8rem}.projects-module--container--2nSDS{display:flex;flex-direction:column;justify-content:space-between;height:100%}.projects-module--container--2nSDS .projects-module--content--1DKR- .projects-module--nav--3MSET{margin-bottom:2rem}.projects-module--container--2nSDS .projects-module--content--1DKR- ul{margin-top:2rem;list-style:none;display:flex;justify-content:center;flex-wrap:wrap}.projects-module--container--2nSDS .projects-module--content--1DKR- ul li{margin:1rem;max-width:200px}.projects-module--container--2nSDS .projects-module--content--1DKR- ul li a{color:#5f6368}.projects-module--container--2nSDS .projects-module--content--1DKR- ul li a:hover h4{color:#0e7475;border:none}.projects-module--container--2nSDS .projects-module--content--1DKR- ul li span{font-size:1.4rem}@media (max-width:37.5em){.projects-module--container--2nSDS .projects-module--content--1DKR- ul li{max-width:300px}}.projects-module--container--2nSDS .projects-module--pagination--jbf2x{display:flex;justify-content:space-between;text-align:center;padding:4rem 20rem 0}@media (max-width:37.5em){.projects-module--container--2nSDS .projects-module--pagination--jbf2x{padding:4rem 6rem 0}}.projects-module--container--2nSDS .projects-module--pagination--jbf2x .projects-module--numbers--2py6q{display:flex;width:100%;justify-content:space-evenly}.projects-module--container--2nSDS .projects-module--pagination--jbf2x .projects-module--numbers--2py6q .projects-module--active--3ihL6{color:#0e7475;pointer-events:none;cursor:default}.projects-module--container--2nSDS .projects-module--pagination--jbf2x .projects-module--numbers--2py6q a{color:inherit}.projects-module--container--2nSDS .projects-module--pagination--jbf2x .projects-module--text--26ACf{width:8rem}</style><meta name="generator" content="Gatsby 2.21.0"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-164858596-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-164858596-1', 'auto', {});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><title data-react-helmet="true">The JavaScript Environment Part Five - Asynchronous Operations | Lee Morrow</title><meta data-react-helmet="true" name="description" content="Data Viz Portfolio"/><meta data-react-helmet="true" property="og:title" content="The JavaScript Environment Part Five - Asynchronous Operations"/><meta data-react-helmet="true" property="og:description" content="Data Viz Portfolio"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Lee Morrow"/><meta data-react-helmet="true" name="twitter:title" content="The JavaScript Environment Part Five - Asynchronous Operations"/><meta data-react-helmet="true" name="twitter:description" content="Data Viz Portfolio"/><link rel="icon" href="/favicon-32x32.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="manifest" href="/manifest.webmanifest"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=89a2ddc85aba16e12ac94e864e711f39"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-7fb6bef314d7271dc1ea.js"/><link as="script" rel="preload" href="/framework-737c3e16d462c41141c7.js"/><link as="script" rel="preload" href="/app-89e1ce8d9dd5fbf30aae.js"/><link as="script" rel="preload" href="/styles-6b8affa5cc22cb60670e.js"/><link as="script" rel="preload" href="/1bfc9850-223fbaa095610d59636d.js"/><link as="script" rel="preload" href="/bba6def2da36e4c78f34265ab7828f962a524897-d77ca9b7a4c3d24501a3.js"/><link as="script" rel="preload" href="/component---src-templates-mdx-index-js-271ea4dae7a0e373bba4.js"/><link as="fetch" rel="preload" href="/page-data/posts/javascript-environment-part-five/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="main-layout-module--container--1qU_Z"><header class="header-module--container--1QvYu"><h1><a href="/">Lee Morrow</a></h1><div><a class="header-module--icon--1MTLq" href="https://twitter.com/leemorrowdev"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a class="header-module--icon--1MTLq" href="https://github.com/leemorrowdev"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a class="header-module--icon--1MTLq" href="https://www.linkedin.com/in/leemorrowdev/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a class="header-module--icon--1MTLq" href="mailto:leemorrowdev@gmail.com"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg></a></div></header><main><div class="mdx-layout-module--container--3TDF0"><div class="mdx-layout-module--nav--nwvf_"><a href="/posts/">← All Posts</a></div><h1>The JavaScript Environment Part Five - Asynchronous Operations</h1><div class="mdx-layout-module--date--3ApRI">August 12, 2020</div><p>This is part five of a five part series I’ve written to assist in my learning, and also to help anyone else out there facing similar struggles. Check out the other parts of this series:</p><ol class="mdx-components-module--ol--GAQc0"><li class="mdx-components-module--li--1xpK9"><a href="/posts/javascript-environment-part-one">Overview</a></li><li class="mdx-components-module--li--1xpK9"><a href="/posts/javascript-environment-part-two">JavaScript engines</a></li><li class="mdx-components-module--li--1xpK9"><a href="/posts/javascript-environment-part-three">Closures</a></li><li class="mdx-components-module--li--1xpK9"><a href="/posts/javascript-environment-part-four">Browser engines</a></li><li class="mdx-components-module--li--1xpK9">Asynchronous Operations</li></ol><h2 class="mdx-components-module--h2--Pu9Up">Asynchronous Operations</h2><h3>Overview</h3><p>JavaScript applications use a single threaded execution model; the event loop is also therefore single threaded. As a result, long running operations on the call stack will block the UI from updating. Thankfully, most long running operations run asynchronously, or in other words on a separate thread from the event loop, through Web APIs built into the browser. </p><p>While these APIs can be accessed through functions available in JavaScript (e.g. <code class="mdx-components-module--code--Ikf1a">fetch()</code>), these functions aren’t called synchronously like other JavaScript functions because this would force the function to remain on the call stack until the API to returns, once again blocking the event loop and therefore the UI from updating. Instead, when these functions are called, their references are immediately removed from the call stack until their API returns, at which point a new function is added to the call stack which contains all code to be executed on the API’s completion. </p><p>It’s important to note that not all Web APIs handle asynchronous operations in the same way because of evolutions in ECMAScript standards over time. Some functions (e.g. <code class="mdx-components-module--code--Ikf1a">XMLHttpRequest()</code>) even have their own methods of handling this behavior. </p><h3>Callback Functions</h3><p>Web APIs written before ES2015 often handled asynchronous operations through <em>callback functions</em>, or functions passed into another function as an argument, with the intent of being called back at a later point in time. These functions are called on the return of the Web API. </p><p>The following examples use JQuery’s <code class="mdx-components-module--code--Ikf1a">getJSON()</code> function. </p><pre class="mdx-components-module--pre--3YkNB"><code>$.getJSON(&quot;./example.json&quot;, function(){
  // handle results 
});
</code></pre><p>Unfortunately this method has many problems, namely the following:</p><h4>Error handling</h4><pre class="mdx-components-module--pre--3YkNB"><code>try {
  $.getJSON(&quot;./example.json&quot;, function(result){
    const data = JSON.parse(result);
  });
} catch(error){
  // handle errors
}
</code></pre><p>In this block, the callback function is called on an entirely different iteration of the event loop and is the only function on the call stack. If an error is thrown within it, for example from the <code class="mdx-components-module--code--Ikf1a">JSON.parse()</code> call, the catch block will not be called and the error will be lost. </p><h4>The Pyramid of Doom</h4><pre class="mdx-components-module--pre--3YkNB"><code>$.getJSON(&quot;./example1.json&quot;, function(){
  $.getJSON(&quot;./example2.json&quot;, function(){
    $.getJSON(&quot;./example3.json&quot;, function(){
      // handle results 
    });
  });
});
</code></pre><p>Calling asynchronous functions in the callback of other asynchronous function results in very difficult code. </p><h4>Running Asynchronous Functions in Parallel</h4><pre class="mdx-components-module--pre--3YkNB"><code>$.getJSON(&quot;./example1.json&quot;, function(){
  // handle results 
});
$.getJSON(&quot;./example2.json&quot;, function(){
  // handle results 
});
$.getJSON(&quot;./example3.json&quot;, function(){
  // handle results 
});
</code></pre><p>In this case, there is no way to know when all the callbacks have returned. If there is some operation that should be completed after all have returned, the only way to know when it should run would be to check if every asynchronous function has returned in every callback. </p><p><strong>Note:</strong> <code class="mdx-components-module--code--Ikf1a">getJSON()</code> is a JQuery function. </p><h3>Promises</h3><p>Web APIs written after ES2015 handle asynchronous operations through <em>Promises</em>. </p><p>A promise is a placeholder object for a value that doesn’t exist, but might in the future. If the promise is kept, its result will be a value. Otherwise, its result will be an error. </p><p>Promises have three states:</p><ul class="mdx-components-module--ul--2-uZm"><li class="mdx-components-module--li--1xpK9">pending, or unresolved state: The value is completely unknown. </li><li class="mdx-components-module--li--1xpK9">fulfilled state: The promise’s <code class="mdx-components-module--code--Ikf1a">resolve()</code> function has been called and the promised value has been returned. </li><li class="mdx-components-module--li--1xpK9">rejected state: <ul class="mdx-components-module--ul--2-uZm"><li class="mdx-components-module--li--1xpK9">The promise’s <code class="mdx-components-module--code--Ikf1a">reject()</code> function has been called</li><li class="mdx-components-module--li--1xpK9">an unhandled exception occurred</li></ul></li></ul><p>The promise is considered resolved if it has entered either the fulfilled or rejected state. </p><p><strong>Note:</strong> The resolve and reject functions are called by the promise in response to some event that should result in the promise being fulfilled or rejected. The promise callback is for reacting to the promise being fulfilled or rejected.   </p><h4>Creating promises</h4><p>The promise constructor takes a single function with resolve and reject functions as parameters, which are provided when the promise is used. This function is called the executor, which is immediately invoked. </p><pre class="mdx-components-module--pre--3YkNB"><code>const promise = new Promise((resolve, reject) =&gt; {
  resolve(&quot;result&quot;);
  // reject(&quot;error&quot;);
});

</code></pre><h4>Using promises</h4><p>Promises are used by calling their built in <code class="mdx-components-module--code--Ikf1a">then()</code> method. This method takes two callback functions: a resolve and a reject. The resolve function is called if the promise should be fulfilled, and the reject function is called if an error occurs.  </p><pre class="mdx-components-module--pre--3YkNB"><code>promise.then(result =&gt; {
  console.log(result);
}, error =&gt; {
  console.log(error);
});
</code></pre><p><strong>Note:</strong> The <code class="mdx-components-module--code--Ikf1a">then()</code> callback is added to the microtask queue, so it is run after all code in the current step of the event loop has completed. </p><p><strong>Example:</strong> The setTimeout Web API uses callbacks to handle its asynchronous operation. Fortunately, can wrap it in a promise to make it easier to work with. </p><pre class="mdx-components-module--pre--3YkNB"><code>function setTimeoutPromise(time) {
  return new Promise((resolve, reject) =&gt; {
    id = setTimeout(() =&gt; {
      resolve(id);
    }, time);
  });
}

setTimeoutPromise(1000).then(id =&gt; {
  console.log(id);
});
</code></pre><h4>Rejecting promises</h4><p>Promises can be rejected in two ways: </p><ul class="mdx-components-module--ul--2-uZm"><li class="mdx-components-module--li--1xpK9">Explicitly: by calling reject in the executor function. </li><li class="mdx-components-module--li--1xpK9">Implicitly: if an unhandled exception occurs, for example an undeclared variable. </li></ul><p>In either of these circumstances, the reject callback of the <code class="mdx-components-module--code--Ikf1a">then()</code> function will be called. </p><h4>Chaining promises</h4><p>Then <code class="mdx-components-module--code--Ikf1a">then()</code> method always returns a new promise. As it turns out, this is useful in cases where a future promise depends on the success of a previous promise;its possible to chain promises together to run one after another!  </p><p>In this case its better to omit the failure callback and handle errors after the final promise in a catch statement. In case of an error, the catch statement will immediately be invoked and the chain will be broken. </p><pre class="mdx-components-module--pre--3YkNB"><code>getJSON(data/resultA.json)
.then(resultA =&gt; getJSON(data/resultB.json))
.then(resultB =&gt; console.log(&quot;completed chain&quot;))
.catch(error =&gt; console.log(error));
</code></pre><p><strong>Note:</strong> Even in the case of a single promise, a catch statement can be used to handle errors as opposed to the reject function. </p><h4>Waiting for a number of promises</h4><p>If we don’t care about the order the promises are completed, we can use the <code class="mdx-components-module--code--Ikf1a">Promise.all()</code> method. This method takes an array full of function callbacks, the promise callback receives an array of all fulfilled values. This promise will fail if any of the promises in it fails. </p><p>If we only care about the first promise to be completed, we can call <code class="mdx-components-module--code--Ikf1a">Promise.race()</code>. It operates the same as <code class="mdx-components-module--code--Ikf1a">Promise.all()</code>, except it returns a new promise that fulfills or rejects based only on the first promise to fulfill or reject. </p><h3>Async/Await</h3><p>ES2017 introduced the <code class="mdx-components-module--code--Ikf1a">async</code> and <code class="mdx-components-module--code--Ikf1a">await</code> keywords to simplify writing promises in a synchronous way. At a high level, <code class="mdx-components-module--code--Ikf1a">async</code> and <code class="mdx-components-module--code--Ikf1a">await</code> essentially operate as a way to combine ES2015 generator functions and promises. </p><p>Remember, yielding from a generator function pauses its execution without blocking the call stack. Combining this ability with promises makes it possible to pause execution of a function containing a promise until the promise has been resolved and its <code class="mdx-components-module--code--Ikf1a">then()</code> method has been called. </p><pre class="mdx-components-module--pre--3YkNB"><code>function setTimeoutPromise(time) {
  return new Promise((resolve, reject) =&gt; {
    id = setTimeout(() =&gt; {
      resolve(id);
    }, time);
  });
}

async function doubleTimeout(time) { 
  firstId = await setTimeoutPromise(time);
  secondId = await setTimeoutPromise(time);
  return [firstId, secondId];
};
</code></pre><p>In this example, the <code class="mdx-components-module--code--Ikf1a">async</code> keyword defines the function as an asynchronous function, and the <code class="mdx-components-module--code--Ikf1a">await</code> keyword followed by an asynchronous operation <em>that returns a promise</em>, creates an expression that pauses the function’s execution until the promise is resolved. </p><p>Async functions always return promises. If some value other than a promise is returned, it is wrapped in a promise. For this reason, the result of the function must be accessed through the <code class="mdx-components-module--code--Ikf1a">then()</code> method. </p><h4>Error handling</h4><pre class="mdx-components-module--pre--3YkNB"><code>function getJSONPromise(path) {
  return new Promise((resolve, reject) =&gt; {
    $.getJSON(() =&gt; {
      resolve(path);
    });
  });
}

try {
  getJSONPromise(&quot;./example.json&quot;).then(function(result){
    const data = JSON.parse(result);
  });
} catch(error){
  // handle errors
}
</code></pre><p>Notice that promises have the same error handling issues that callback functions have. Once again, the callback function in the <code class="mdx-components-module--code--Ikf1a">then()</code> method is called on an entirely different iteration of the event loop and is the only function on the call stack. If an error is thrown within it, for example from the <code class="mdx-components-module--code--Ikf1a">JSON.parse()</code> call, the catch block will not be called and the error will be lost. </p><p>With <code class="mdx-components-module--code--Ikf1a">async</code> and <code class="mdx-components-module--code--Ikf1a">await</code>, however, the catch statement actually will catch the error. </p><pre class="mdx-components-module--pre--3YkNB"><code>async function getJSONAsync() {
  try {
    const data = JSON.parse(await $.getJSON());
  }
  catch(error) {
    console.log(error);
  }
}
</code></pre><h4>Error Reporting</h4><p>Promises report all errors, <em>even those within <code class="mdx-components-module--code--Ikf1a">then()</code></em> calls, as originating within the promise itself. This makes it very difficult to track down where an error originates from because a function that returns a new promise could be called throughout the code base and handle errors differently each time. </p><p>In async functions, errors are reported as coming from the function where they originate. </p><h4>Syntax</h4><p>Async functions improve syntax significantly from promises. </p><ul class="mdx-components-module--ul--2-uZm"><li class="mdx-components-module--li--1xpK9">conditionally chained promises do not require nested <code class="mdx-components-module--code--Ikf1a">then()</code> calls like promise chains do. </li><li class="mdx-components-module--li--1xpK9">synchronously called async operations do not need complicated <code class="mdx-components-module--code--Ikf1a">then()</code> calls like promise chains do. </li></ul></div></main><footer class="footer-module--container--Mv3GA"><div>© <!-- -->2020<!-- --> <span class="footer-module--author--xwwnz">Lee Morrow</span></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/javascript-environment-part-five/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-89e1ce8d9dd5fbf30aae.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-18b9bd78e89bbe4752a5.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7236591f5e059bec2620.js"],"component---src-pages-index-js":["/component---src-pages-index-js-e0015ced9d8000b6f071.js"],"component---src-templates-mdx-index-js":["/component---src-templates-mdx-index-js-271ea4dae7a0e373bba4.js"],"component---src-templates-posts-index-js":["/component---src-templates-posts-index-js-a2ec389dfe69396ff377.js"],"component---src-templates-projects-index-js":["/component---src-templates-projects-index-js-9744e35a9eb2199c1eff.js"]};/*]]>*/</script><script src="/component---src-templates-mdx-index-js-271ea4dae7a0e373bba4.js" async=""></script><script src="/bba6def2da36e4c78f34265ab7828f962a524897-d77ca9b7a4c3d24501a3.js" async=""></script><script src="/1bfc9850-223fbaa095610d59636d.js" async=""></script><script src="/styles-6b8affa5cc22cb60670e.js" async=""></script><script src="/app-89e1ce8d9dd5fbf30aae.js" async=""></script><script src="/framework-737c3e16d462c41141c7.js" async=""></script><script src="/webpack-runtime-7fb6bef314d7271dc1ea.js" async=""></script></body></html>